Optimizaciones, refactorización, añadidos algunos inputs para que sea mas personalizable